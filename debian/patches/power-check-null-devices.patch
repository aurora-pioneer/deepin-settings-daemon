Index: gnome-settings-daemon-3.4.2/plugins/power/gsd-power-manager.c
===================================================================
--- gnome-settings-daemon-3.4.2.orig/plugins/power/gsd-power-manager.c	2012-05-22 21:09:13.401387320 +0200
+++ gnome-settings-daemon-3.4.2/plugins/power/gsd-power-manager.c	2012-05-22 21:09:19.473387104 +0200
@@ -1161,7 +1161,7 @@
 
         /* add to database */
         array = up_client_get_devices (manager->priv->up_client);
-        for (i=0;i<array->len;i++) {
+        for (i = 0; array != NULL && i < array->len; i++) {
                 device = g_ptr_array_index (array, i);
                 engine_device_add (manager, device);
                 engine_check_recall (manager, device);
